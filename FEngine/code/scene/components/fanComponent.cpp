#include "fanGlobalIncludes.h"

#include "scene/components/fanComponent.h"
#include "scene/fanEntity.h"
#include "scene/fanScene.h"
#include "core/input/fanInput.h"

namespace fan
{
	namespace scene
	{
		REGISTER_ABSTRACT_TYPE_INFO(Component)

		//================================================================================================================================
		//================================================================================================================================
		Component::Component() :
			m_entity(nullptr)
			, m_lastModified(0)
			, m_isRemovable(true)
			, m_isBeingDeleted(false) {

		}

		//================================================================================================================================
		//================================================================================================================================
		void Component::OnAttach() {
		};

		//================================================================================================================================
		//================================================================================================================================
		void Component::OnDetach() {
		}

		//================================================================================================================================
		//================================================================================================================================
		bool Component::IsModified() const {
			return Input::GetFrameCount() == m_lastModified; 
		}
		
		//================================================================================================================================
		//================================================================================================================================
		void Component::SetModified( const bool _updateAABB ) { 
			m_lastModified = Input::GetFrameCount(); 
			if (_updateAABB) {
				m_entity->GetScene()->ComputeAABBEndFrame(m_entity);
			}
		}
	}
}